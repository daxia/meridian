# å¯åŠ¨æ—¥å¿—é”™è¯¯åˆ†ææŠ¥å‘Š - 20260214

## 1. æ¦‚è¿°

æœ¬æ–‡æ¡£å¯¹ç³»ç»Ÿå¯åŠ¨è¿‡ç¨‹ä¸­ `logs/` ç›®å½•ä¸‹æ•è·çš„ä¸‰ä¸ªæœåŠ¡ï¼ˆML Service, Frontend, Backendï¼‰çš„é”™è¯¯æ—¥å¿—è¿›è¡Œè¯¦ç»†åˆ†æï¼Œå¹¶æä¾›ä¿®å¤æ–¹æ¡ˆã€‚

## 2. ML Service (Python/FastAPI)

### é”™è¯¯æ—¥å¿—
```
UnicodeEncodeError: 'gbk' codec can't encode character '\U0001f680' in position 28: illegal multibyte sequence
```

### åŸå› åˆ†æ
- **ç»„ä»¶**: FastAPI CLI (`fastapi dev`) ä½¿ç”¨äº† `rich` åº“æ¥ç¾åŒ–ç»ˆç«¯è¾“å‡ºã€‚
- **ç°è±¡**: åœ¨å¯åŠ¨æ—¶å°è¯•æ‰“å°ç«ç®­ emoji (ğŸš€) åˆ°æ§åˆ¶å°ã€‚
- **æ ¹å› **: Windows ç¯å¢ƒä¸‹çš„ Python é»˜è®¤æ§åˆ¶å°ç¼–ç ï¼ˆé€šå¸¸æ˜¯ CP936/GBKï¼‰æ— æ³•å¤„ç† Emoji å­—ç¬¦ã€‚

### ä¿®å¤æ–¹æ¡ˆ
åœ¨ `start_all.js` ä¸­å¯åŠ¨ Python è¿›ç¨‹æ—¶ï¼Œæ³¨å…¥ç¯å¢ƒå˜é‡ `PYTHONUTF8=1`ï¼Œå¼ºåˆ¶ Python ä½¿ç”¨ UTF-8 ç¼–ç è¿›è¡Œ I/O æ“ä½œã€‚

## 3. Backend (Cloudflare Workers)

### é”™è¯¯æ—¥å¿—
```
X [ERROR] Could not resolve "./logger"
    src/lib/rateLimiter.ts:2:23:
      2 â”‚ import { Logger } from './logger';
```

### åŸå› åˆ†æ
- **ç»„ä»¶**: `@meridian/backend`
- **æ–‡ä»¶**: `src/lib/rateLimiter.ts`
- **æ ¹å› **: ä»£ç ä¸­ä½¿ç”¨äº†ç›¸å¯¹å¯¼å…¥ `import { Logger } from './logger'`ï¼Œè¯•å›¾åœ¨ `src/lib/` ç›®å½•ä¸‹æŸ¥æ‰¾ `logger.ts`ï¼Œä½†å®é™…ä¸Šè¯¥æ–‡ä»¶ä¸å­˜åœ¨ã€‚Logger ç±»åº”è¯¥ä» workspace åŒ… `@meridian/logger` å¯¼å…¥ã€‚

### ä¿®å¤æ–¹æ¡ˆ
ä¿®æ”¹ `src/lib/rateLimiter.ts`ï¼Œå°†å¯¼å…¥è¯­å¥æ›´æ­£ä¸ºï¼š
```typescript
import { Logger } from '@meridian/logger';
```

## 4. Frontend (Nuxt 3)

### é”™è¯¯æ—¥å¿—
```
[vite-node] [ERR_LOAD_URL] @meridian/logger from "src/plugins/logger.ts"
Failed to resolve import "@meridian/logger" from "src/plugins/logger.ts". Does the file exist?
```

### åŸå› åˆ†æ
- **ç»„ä»¶**: Nuxt / Vite
- **æ ¹å› **: è™½ç„¶åœ¨ `nuxt.config.ts` ä¸­é…ç½®äº† `alias`ï¼Œä½†ä½¿ç”¨äº†ç›¸å¯¹è·¯å¾„ `../../packages/logger/src/index.ts`ã€‚Vite åœ¨æŸäº›ä¸Šä¸‹æ–‡ï¼ˆå°¤å…¶æ˜¯ Server-Side Rendering æˆ– Vite Nodeï¼‰ä¸­å¯¹ç›¸å¯¹è·¯å¾„åˆ«åçš„è§£æå¯èƒ½ä¸ç¨³å®šï¼Œæˆ–è€…è·¯å¾„è®¡ç®—åŸºå‡†ç‚¹ä¸ç¬¦åˆé¢„æœŸã€‚

### ä¿®å¤æ–¹æ¡ˆ
åœ¨ `nuxt.config.ts` ä¸­ä½¿ç”¨ `path` æ¨¡å—æ„å»º**ç»å¯¹è·¯å¾„**åˆ«åï¼Œç¡®ä¿æ— è®ºåœ¨ä½•å¤„è§£æéƒ½èƒ½å‡†ç¡®æŒ‡å‘ç›®æ ‡æ–‡ä»¶ã€‚

```typescript
import { fileURLToPath } from 'url';
import { dirname, resolve } from 'path';

const currentDir = dirname(fileURLToPath(import.meta.url));

export default defineNuxtConfig({
  alias: {
    '@meridian/logger': resolve(currentDir, '../../packages/logger/src/index.ts'),
  },
  // ...
});
```

## 5. æ€»ç»“

æœ¬æ¬¡å¯åŠ¨å¤±è´¥æ¶‰åŠç¯å¢ƒç¼–ç ã€ä»£ç å¼•ç”¨é”™è¯¯å’Œæ„å»ºé…ç½®è·¯å¾„è§£æä¸‰ä¸ªå±‚é¢çš„é—®é¢˜ã€‚ä¿®å¤ååº”èƒ½å®ç°ä¸‰ç«¯æœåŠ¡çš„æ­£å¸¸å¯åŠ¨ã€‚
