---
doc_type: prd
doc_id: PRD-SYS-报告导出
status: active
owner: user
created: 2026-02-14
updated: 2026-02-14
---

# PRD-SYS-报告导出

## 1. 文档信息

| 属性 | 内容 |
| :--- | :--- |
| **文档编号** | PRD-SYS-Report-Export-001 |
| **关联需求** | 需求 13 (情报简报本地导出) |
| **状态** | 进行中 |
| **版本** | v1.0 |

## 2. 变更记录

| 日期 | 版本 | 修改人 | 描述 |
| :--- | :--- | :--- | :--- |
| 2026-02-14 | v1.0 | Agent | 初始创建，定义本地导出简报功能 |

## 3. 背景与目标

### 3.1 背景
当前系统生成的情报简报（Intelligence Brief）主要存储在数据库中，用户只能通过 Admin 面板查看。用户希望能够将简报导出为本地文件（Markdown/PDF），以便存档或分享。

### 3.2 目标
1.  **自动化导出**：系统应能自动或手动触发导出流程。
2.  **本地存储**：简报应保存到项目根目录下的 `report/` 文件夹。
3.  **格式规范**：文件名格式为 `情报简报-YYYYMMDD.md`。
4.  **内容完整**：导出的文件应包含简报的全部内容（摘要、分类文章、统计信息等）。

## 4. 详细需求

### 4.1 功能需求

#### 4.1.1 导出触发机制
*   **手动触发**：提供脚本或命令，供用户手动运行以导出当日简报。
*   **定时触发**：(可选) 集成到 `start_all.js` 或系统 Cron，每天定时执行导出。

#### 4.1.2 简报获取
*   **API 交互**：导出工具需调用 Backend API 获取最新生成的简报内容。
*   **Fallback**：如果当日未生成简报，应提示用户或尝试触发生成。

#### 4.1.3 文件生成
*   **目录管理**：自动检查并创建 `report/` 目录（如果不存在）。
*   **命名规则**：`情报简报-{YYYYMMDD}.md`。
*   **格式支持**：
    *   **Markdown (P0)**: 直接将文本内容写入 `.md` 文件。
    *   **PDF (P1)**: (预留) 支持将 Markdown 转换为 PDF。

### 4.2 非功能需求
*   **环境依赖**：脚本应在 Node.js 环境下运行（利用现有项目环境）。
*   **错误处理**：网络请求失败或文件写入失败时，应输出清晰的错误日志。

## 5. 验收标准

1.  运行导出脚本后，`report/` 目录下出现当天的简报文件。
2.  文件内容完整，无乱码。
3.  文件名符合 `情报简报-YYYYMMDD.md` 格式。
