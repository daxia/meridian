---
doc_type: prd
doc_id: PRD-SYS-日志功能需求
owner: system
related_requirement:
  - 20260214002
created: 2026-02-14
updated: 2026-02-14
---
# 产品需求文档（PRD）：日志功能需求

**需求来源**：docs/01-我的需求/我的需求.md

本文文档针对的功能模块：System (Infrastructure) / Logger Package

---

## 1. 引言

### 1.1 背景
Meridian 系统包含多个服务（Frontend, Backend, ML Service），日志分散在不同层级。为了便于运维排错与系统监控，需要统一的日志功能规范，涵盖日志的采集、格式化、存储与展示。当前的重点是解决本地开发环境下的日志可读性问题。

### 1.2 目标
定义系统级日志功能需求，确保日志清晰、统一且易于分析。初期阶段优先解决本地日志文件乱码（ANSI 码）问题，后续可扩展至日志分级、轮转等需求。

---

## 2. 变更记录

- **2026-02-14**:
  - **需求编号**: 20260214002
  - **内容**: 定义日志文件 ANSI 清理需求。
  - **目标**: 提升日志可读性。

---

## 需求1：日志文件 ANSI 颜色代码清理 (已完成)

**需求编号**: 20260214002

**DD编号**: DD-SYS-日志功能需求

### 1. 需求功能点

**1）日志输出流处理**:

- **描述**: 修改 `start_all.js` 中的子进程输出处理逻辑。
- **UI/UX 交互**: 无。
- **验收标准**:
    1.  运行 `node start_all.js` 后，终端输出依然有颜色。
    2.  查看 `logs/frontend.log`、`logs/backend.log` 等文件，内容为纯文本，无乱码或 `[xxm` 字符。

### 2.目标与约束

- **目标**: 清晰、可读的日志文件。
- **约束**: 不引入重量级日志库，仅在 `start_all.js` 层面处理。

### 3. 当前实现分析

当前直接将 `p.stdout` 和 `p.stderr` 的数据块写入文件流，导致 Buffer 中的 ANSI 码被原样写入。

### 4. 需求审核结论

**审核结果**: 批准

**审核日期**: 2026-02-14

**结论**: 同意实施。
