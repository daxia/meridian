
### 2.5 ML Service 日志 JSON 解析与格式化

在 `ML Service` 中，部分日志以 JSON 格式输出，混合在普通文本日志中，影响可读性。

**问题原因**:
1.  Python 服务配置了 `JsonFormatter`，导致 `uvicorn` 或业务日志输出 JSON 字符串。
2.  `start_all.js` 仅做简单转发，未对内容进行解析。

**解决方案**:
在 `createLogHandler` 的行处理循环中，增加 JSON 解析逻辑。

**代码实现**:

```javascript
// 在行处理循环中
const trimmedLine = line.trim();
if (trimmedLine.startsWith('{') && trimmedLine.endsWith('}')) {
  try {
    const logObj = JSON.parse(trimmedLine);
    if (logObj.level && logObj.message) {
      const level = logObj.level.toUpperCase();
      const module = logObj.module || logObj.logger || '';
      const moduleStr = module ? ` [${module}]` : '';
      line = `[${level}]${moduleStr} ${logObj.message}`;
    }
  } catch (e) {
    // 解析失败则保留原样
  }
}
```

**效果**:
`{"level": "info", "message": "msg"}` -> `[INFO] msg`
